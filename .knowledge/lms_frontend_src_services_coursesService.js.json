{"is_source_file": true, "format": "JavaScript", "description": "This file defines a coursesService object that provides functions for managing course data and user interactions within an educational content management system. It includes methods for listing courses, fetching course details, enrolling in courses, starting courses, and marking courses as completed. The service interacts with a backend API and optionally with a Supabase database, depending on the mode.", "external_files": ["../apiClient", "../lib/supabaseClient"], "external_methods": ["apiJson", "apiFetch", "getSupabase", "isSupabaseMode"], "published": ["coursesService"], "classes": [], "methods": [{"name": "list()", "description": "Fetches a list of available courses. Uses direct database queries in Supabase mode or falls back to an API call.", "scope": "coursesService", "scopeKind": "class"}, {"name": "get", "description": "Retrieves detailed information about a specific course, including user enrollment and progress if applicable."}, {"name": "enroll", "description": "Enrolls the current user in a specified course."}, {"name": "start", "description": "Marks the course as started for the current user, updating enrollment status and progress."}, {"name": "complete", "description": "Marks the course as completed for the current user, updating enrollment and progress status."}], "calls": ["supabase.auth.getUser", "supabase.from('courses').select", "supabase.from('enrollments').select", "supabase.from('user_course_progress').select", "supabase.from('enrollments').upsert", "supabase.from('user_course_progress').upsert", "apiJson('/api/courses')", "apiJson('/courses')", "apiJson(`/api/courses/${encodeURIComponent(id)}`)", "apiJson(`/courses/${encodeURIComponent(id)}`)", "apiFetch(`/api/courses/${encodeURIComponent(id)}/enroll`)", "apiFetch(`/api/courses/${encodeURIComponent(id)}/start`)", "apiFetch(`/api/courses/${encodeURIComponent(id)}/complete`)"], "search-terms": ["courses service", "enrollment", "progress tracking", "Supabase integration", "course details", "user progress", "course list", "backend API interaction"], "state": 2, "file_id": 38, "knowledge_revision": 159, "git_revision": "3ac36af623a9db257ab68caf60f89796ed9f0b44", "revision_history": [{"87": ""}, {"98": "2f9b23c9cfc41d5087a84a2669fba9757c3d8273"}, {"159": "3ac36af623a9db257ab68caf60f89796ed9f0b44"}], "ctags": [{"_type": "tag", "name": "coursesService", "path": "/home/kavia/workspace/code-generation/educational-content-management-system-263732-263747/lms_frontend/src/services/coursesService.js", "pattern": "/^export const coursesService = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/educational-content-management-system-263732-263747/lms_frontend/src/services/coursesService.js", "pattern": "/^      const data = (res.headers.get(\"content-type\") || \"\").includes(\"application\\/json\")$/", "language": "JavaScript", "kind": "constant", "scope": "coursesService", "scopeKind": "class"}, {"_type": "tag", "name": "err", "path": "/home/kavia/workspace/code-generation/educational-content-management-system-263732-263747/lms_frontend/src/services/coursesService.js", "pattern": "/^        const err = new Error(\"Not authenticated\");$/", "language": "JavaScript", "kind": "constant", "scope": "coursesService", "scopeKind": "class"}, {"_type": "tag", "name": "err", "path": "/home/kavia/workspace/code-generation/educational-content-management-system-263732-263747/lms_frontend/src/services/coursesService.js", "pattern": "/^      const err = new Error(\"Course id required\");$/", "language": "JavaScript", "kind": "constant", "scope": "coursesService", "scopeKind": "class"}, {"_type": "tag", "name": "err", "path": "/home/kavia/workspace/code-generation/educational-content-management-system-263732-263747/lms_frontend/src/services/coursesService.js", "pattern": "/^      const err = new Error(\"Failed to complete course\");$/", "language": "JavaScript", "kind": "constant", "scope": "coursesService", "scopeKind": "class"}, {"_type": "tag", "name": "err", "path": "/home/kavia/workspace/code-generation/educational-content-management-system-263732-263747/lms_frontend/src/services/coursesService.js", "pattern": "/^      const err = new Error(\"Failed to enroll\");$/", "language": "JavaScript", "kind": "constant", "scope": "coursesService", "scopeKind": "class"}, {"_type": "tag", "name": "err", "path": "/home/kavia/workspace/code-generation/educational-content-management-system-263732-263747/lms_frontend/src/services/coursesService.js", "pattern": "/^      const err = new Error(\"Failed to start course\");$/", "language": "JavaScript", "kind": "constant", "scope": "coursesService", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/educational-content-management-system-263732-263747/lms_frontend/src/services/coursesService.js", "pattern": "/^  async list() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "coursesService", "scopeKind": "class"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/educational-content-management-system-263732-263747/lms_frontend/src/services/coursesService.js", "pattern": "/^    const res = await apiFetch(`\\/api\\/courses\\/${encodeURIComponent(id)}\\/complete`, { method: /", "language": "JavaScript", "kind": "constant", "scope": "coursesService", "scopeKind": "class"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/educational-content-management-system-263732-263747/lms_frontend/src/services/coursesService.js", "pattern": "/^    const res = await apiFetch(`\\/api\\/courses\\/${encodeURIComponent(id)}\\/enroll`, { method: \"P/", "language": "JavaScript", "kind": "constant", "scope": "coursesService", "scopeKind": "class"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/educational-content-management-system-263732-263747/lms_frontend/src/services/coursesService.js", "pattern": "/^    const res = await apiFetch(`\\/api\\/courses\\/${encodeURIComponent(id)}\\/start`, { method: \"PO/", "language": "JavaScript", "kind": "constant", "scope": "coursesService", "scopeKind": "class"}, {"_type": "tag", "name": "supabase", "path": "/home/kavia/workspace/code-generation/educational-content-management-system-263732-263747/lms_frontend/src/services/coursesService.js", "pattern": "/^      const supabase = getSupabase();$/", "language": "JavaScript", "kind": "constant", "scope": "coursesService", "scopeKind": "class"}, {"_type": "tag", "name": "uid", "path": "/home/kavia/workspace/code-generation/educational-content-management-system-263732-263747/lms_frontend/src/services/coursesService.js", "pattern": "/^      const uid = sessionData?.user?.id;$/", "language": "JavaScript", "kind": "constant", "scope": "coursesService", "scopeKind": "class"}], "hash": "2d966d060eb61b6b573121c2393dc547", "format-version": 4, "code-base-name": "lms_frontend", "filename": "lms_frontend/src/services/coursesService.js"}